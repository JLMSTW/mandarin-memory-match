<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mandarin Memory Match Game</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet"/>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
    .game-container{max-width:1200px;margin:0 auto}
    .header{text-align:center;margin-bottom:20px;color:#fff}
    .header h1{font-size:2.3rem;font-weight:700;margin-bottom:8px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
    .header p{font-size:1.05rem;opacity:.9}

    .toolbar{display:flex;gap:12px;justify-content:center;align-items:center;flex-wrap:wrap;margin:16px 0 8px}
    .select, .btn{appearance:none;border:none;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
    .select{background:#fff}
    .btn{background:linear-gradient(135deg,#ff9a9e,#fecfef);color:#2c3e50;box-shadow:0 4px 12px rgba(0,0,0,.18);transition:transform .2s, box-shadow .2s}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(0,0,0,.24)}

    .game-stats{display:flex;justify-content:center;gap:22px;margin:10px 0 20px;flex-wrap:wrap}
    .stat-item{background:rgba(255,255,255,.2);padding:12px 18px;border-radius:14px;color:#fff;text-align:center;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3)}
    .stat-number{font-size:1.4rem;font-weight:700;display:block}
    .stat-label{font-size:.85rem;opacity:.85}

    .game-board{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px;margin-bottom:24px}
    .card{aspect-ratio:3/4;perspective:1000px;cursor:pointer}
    .card-inner{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}
    .card.flipped .card-inner{transform:rotateY(180deg)}
    .card-face{position:absolute;inset:0;backface-visibility:hidden;border-radius:18px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:18px;box-shadow:0 8px 24px rgba(0,0,0,.15);border:3px solid rgba(255,255,255,.2)}
    .card-front{background:linear-gradient(135deg,#ff6b6b,#ee5a24);color:#fff}
    .card-back{background:linear-gradient(135deg,#4ecdc4,#44a08d);color:#fff;transform:rotateY(180deg)}
    .card-back.french{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#2c3e50}
    .chinese-char{font-family:'Noto Sans SC',sans-serif;font-size:2.2rem;font-weight:700;margin-bottom:8px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}
    .pinyin{font-size:1.1rem;font-weight:500;opacity:.95;font-style:italic}
    .french-meaning{font-size:1.12rem;font-weight:700;text-align:center;line-height:1.35}
    .card.matched{opacity:.7;transform:scale(.97);pointer-events:none}
    .card.matched .card-inner{transform:rotateY(180deg)}

    .victory-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:34px;border-radius:18px;text-align:center;box-shadow:0 20px 40px rgba(0,0,0,.3);z-index:1000;display:none}
    .victory-message h2{font-size:1.8rem;margin-bottom:10px}
    .victory-message p{font-size:1rem;margin-bottom:16px}

    @media (max-width:768px){
      .game-board{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:14px}
      .chinese-char{font-size:1.9rem}
      .french-meaning{font-size:1rem}
      .header h1{font-size:1.9rem}
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="header">
      <h1>üß† Mandarin Memory Match</h1>
      <p>Match Chinese characters with their French meanings!</p>
    </div>

    <!-- Èõ£Â∫¶ËàáÊéßÂà∂ -->
    <div class="toolbar">
      <label style="color:#fff;font-weight:600">Difficulty</label>
      <select id="difficulty" class="select" title="Difficulty">
        <option value="easy" selected>EasyÔºà6 Â≠óÔºâ</option>
        <option value="advanced">AdvancedÔºà11 Â≠óÔºâ</option>
      </select>
      <button class="btn" id="newGameBtn">üîÑ New Game</button>
    </div>

    <!-- Áµ±Ë®à -->
    <div class="game-stats">
      <div class="stat-item"><span class="stat-number" id="moves">0</span><span class="stat-label">Moves</span></div>
      <div class="stat-item"><span class="stat-number" id="matches">0</span><span class="stat-label">Matches</span></div>
      <div class="stat-item"><span class="stat-number" id="timer">00:00</span><span class="stat-label">Time</span></div>
      <div class="stat-item"><span class="stat-number" id="levelTag">Easy</span><span class="stat-label">Level</span></div>
    </div>

    <!-- ÈÅäÊà≤ÂçÄ -->
    <div class="game-board" id="gameBoard"></div>
  </div>

  <!-- ÂãùÂà©Ë®äÊÅØ -->
  <div class="victory-message" id="victoryMessage">
    <h2>üéâ F√©licitations!</h2>
    <p>You've matched all the vocabulary pairs!</p>
    <button class="btn" id="playAgainBtn">Play Again</button>
  </div>

  <script>
    // ----- Ë®≠ÂÆöÔºöÈÖçÂ∞çÂ§±ÊïóÁøªÂõûÂéªÁöÑÂª∂ÈÅ≤ÔºàÊØ´ÁßíÔºâ -----
    const FLIP_BACK_DELAY = 1500; // ÊîæÊÖ¢ÁÇ∫ 1.5s

    // ÂÆåÊï¥ 11 Â≠óÈ°åÂ∫´ÔºàÈÄ≤ÈöéÁî®Ôºâ
    const FULL_VOCAB = [
      { chinese:'ÈÇÄË´ã', pinyin:'yƒÅo q«êng', french:'(V.) inviter' },
      { chinese:'ÊúâË∂£', pinyin:'y«íu q√π', french:'(Adj.) int√©ressant(e)' },
      { chinese:'Ë†ª', pinyin:'m√°n', french:'(Adv./Adj.) assez / plut√¥t' },
      { chinese:'ÁúãÁúã', pinyin:'k√†n k√†n', french:'(V.) jeter un ≈ìil / essayer de voir' },
      { chinese:'Âêà‰Ωú', pinyin:'h√© zu√≤', french:'(N./V.) coop√©ration / coop√©rer' },
      { chinese:'ÂéüÂõ†', pinyin:'yu√°n yƒ´n', french:'(N.) raison' },
      { chinese:'‰∏çÂæó‰∏ç', pinyin:'b√π d√© b√π', french:"(Expr.) ne pas avoir le choix / √™tre oblig√© de" },
      { chinese:'Êö´ÂÅú', pinyin:'zh√†n t√≠ng', french:'(V.) suspendre / faire une pause' },
      { chinese:'ÂéüÊú¨', pinyin:'yu√°n bƒõn', french:"(Adv./Adj.) √† l'origine / originalement" },
      { chinese:'Âª∂', pinyin:'y√°n', french:'(V.) reporter / retarder' },
      { chinese:'Ë®àÁï´', pinyin:'j√¨ hu√†', french:'(N./V.) plan / planifier' }
    ];

    // ÂèñÂâç 6 Â≠ó‰ΩúÁÇ∫ÂÖ•ÈñÄÈóúÂç°
    const EASY_VOCAB = FULL_VOCAB.slice(0, 6);

    let gameState;

    function buildCards(list){
      const cards = [];
      list.forEach((item, idx)=>{
        cards.push({ type:'chinese', pairId:idx, content:item });
        cards.push({ type:'french',  pairId:idx, content:item });
      });
      return shuffle(cards);
    }

    function shuffle(arr){
      const a=[...arr];
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function createCardEl(card){
      const el = document.createElement('div');
      el.className = 'card';
      el.dataset.pairId = card.pairId;

      const inner = document.createElement('div');
      inner.className = 'card-inner';

      const front = document.createElement('div');
      front.className = 'card-face card-front';
      front.innerHTML = '<div style="font-size:3rem;">üÄÑ</div>';

      const back = document.createElement('div');
      back.className = `card-face card-back ${card.type==='french'?'french':''}`;
      back.innerHTML = card.type==='chinese'
        ? `<div class="chinese-char">${card.content.chinese}</div><div class="pinyin">${card.content.pinyin}</div>`
        : `<div class="french-meaning">${card.content.french}</div>`;

      inner.append(front, back);
      el.appendChild(inner);
      el.addEventListener('click', ()=> flipCard(el));
      return el;
    }

    function flipCard(el){
      if(gameState.flipped.length>=2 || el.classList.contains('flipped') || el.classList.contains('matched')) return;
      if(!gameState.started) startTimer();

      el.classList.add('flipped');
      gameState.flipped.push(el);

      if(gameState.flipped.length===2){
        gameState.moves++; updateStats();
        setTimeout(checkMatch, FLIP_BACK_DELAY);
      }
    }

    function checkMatch(){
      const [a,b] = gameState.flipped;
      if(a.dataset.pairId === b.dataset.pairId){
        a.classList.add('matched'); b.classList.add('matched');
        gameState.matches++; updateStats();
        if(gameState.matches === gameState.pairs) finish();
      }else{
        a.classList.remove('flipped');
        b.classList.remove('flipped');
      }
      gameState.flipped = [];
    }

    function startTimer(){
      gameState.started = true;
      gameState.start = Date.now();
      gameState.timer = setInterval(()=>{
        const s = Math.floor((Date.now()-gameState.start)/1000);
        const mm = String(Math.floor(s/60)).padStart(2,'0');
        const ss = String(s%60).padStart(2,'0');
        document.getElementById('timer').textContent = `${mm}:${ss}`;
      }, 1000);
    }

    function updateStats(){
      document.getElementById('moves').textContent = gameState.moves;
      document.getElementById('matches').textContent = gameState.matches;
    }

    function finish(){
      clearInterval(gameState.timer);
      setTimeout(()=> document.getElementById('victoryMessage').style.display='block', 300);
    }

    function reset(level){
      // Ê±∫ÂÆöÈõ£Â∫¶
      const list = level==='advanced' ? FULL_VOCAB : EASY_VOCAB;
      document.getElementById('levelTag').textContent = (level==='advanced' ? 'Advanced' : 'Easy');

      // ÂÖàÊ∏ÖË®àÊôÇÂô®
      if(gameState?.timer) clearInterval(gameState.timer);

      // ÂàùÂßãÂåñÁãÄÊÖã
      gameState = {
        cards: buildCards(list),
        flipped: [],
        matches: 0,
        moves: 0,
        started: false,
        start: null,
        timer: null,
        pairs: list.length
      };

      // Ê∏ÖÁï´Èù¢
      document.getElementById('victoryMessage').style.display = 'none';
      document.getElementById('moves').textContent = '0';
      document.getElementById('matches').textContent = '0';
      document.getElementById('timer').textContent = '00:00';

      const board = document.getElementById('gameBoard');
      board.innerHTML = '';
      gameState.cards.forEach(c => board.appendChild(createCardEl(c)));
    }

    // Á∂ÅÂÆö UI
    document.addEventListener('DOMContentLoaded', ()=>{
      const levelSelect = document.getElementById('difficulty');
      document.getElementById('newGameBtn').addEventListener('click', ()=> reset(levelSelect.value));
      document.getElementById('playAgainBtn').addEventListener('click', ()=> reset(levelSelect.value));
      levelSelect.addEventListener('change', e => reset(e.target.value));
      // È†êË®≠ EasyÔºà6 Â≠óÔºâ
      reset('easy');
    });
  </script>
</body>
</html>
